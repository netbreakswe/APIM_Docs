\newpage
\section{Configurazione software}
\subsection{Pre-requisiti}

\subsection{Installazione di Git}
	\subsubsection{Windows 10}
	Scaricare l’eseguibile di msysGit dal sito: http://msysgit.github.io/ e procedere con
	l’installazione.
	\subsubsection{Mac OSX}
	Eseguire da terminale il seguente comando, dopo aver installato Homebrew (http://
	brew.sh/):
	
	\begin{center}
	  \verb| $ brew install git|
	\end{center}

	\subsubsection{Ubuntu 16.04 LTS}
	Eseguire da terminale il seguente comando:
	
	\begin{center}
	  \verb| $ apt install git|
\end{center}

\subsubsection{Installazione node.js}
Scaricare l'installer corretto in base al proprio sistema operativo, reperibile alla pagina ufficiale di download di Node.js (https://nodejs.org/it/download/). Procedere dunquecon l’installazione di Node.js.

\subsubsection{Download dei file da GitHub}
Eseguire da terminale il seguente comando:
\begin{center}
	\verb| $  git clone ––recursive-submodules https://github.com/netbreakswe/APIM_Source|
\end{center}


\subsubsection{Installazione Java JDK}
Scaricare l’eseguibile compatibile con il proprio terminale di JDK8 dal sito:
	\begin{center}
		 \url{http://www.oracle.com/technetwork/java/javase/downloads/} 
	 \end{center}
e procedere con l’installazione.

\subsubsection{Installazione Jolie}
Prima di eseguire questo passaggio è importante aver eseguito quanto descritto nella sezione precedente.

Scaricare l’eseguibile di Jolie dal sito: http://www.jolie-lang.org/downloads.html. 
\paragraph{Windows}
Aprire un terminale con privilegi di amministratore nella cartella del download ed eseguire:
	\begin{center}
	 \verb| java -jar jolie-1.6.0.jar|
	\end{center}
\paragraph{Linux/MacOS}
Aprire un terminale nella cartella del download ed eseguire:
	\begin{center}
	 \verb| sudo java -jar jolie-1.6.0.jar|
	\end{center}
\subsection{Installazione Dipendenze WebApp}
Aprire il terminale nella cartella con il seguente percorso: \verb|*Download del punto 5.2.5*/Frontend| ed eseguire i seguenti comandi in sequenza:
	\begin{center}
	\verb| npm install -g bower@latest|
\end{center}

	\begin{center}
	\verb| npm install -g http-server|
\end{center}

	\begin{center}
	\verb| npm install -g angular-seed@latest|
\end{center}


	\begin{center}
	\verb| npm install|
\end{center}




\subsection{Installazione piattaforma}
In questa sezione è spiegato come avviare i microservizi neccessari per una corretta fruizione della web app e del gateway. Si suppone che la cartella di partenza sia la cartella scaricata al punto 5.2.5 del manuale corrente.
\subsubsection{Microservizi relativi alla Web App}
Di seguito saranno elencati i microservizi da avviare per una corretta funzione della web app. L'ordine di avvio non è rilevante e può avvenire in ordine casuale.
	\paragraph{Microservizio per gestione utenti}
	Per avviare il microservizio relativo alla gestione utenti è necesario recarsi nella cartella:
	\begin{center}
		\verb| \Backend\services\usersDB|
	\end{center}
	
	ed eseguire da terminale il comando:
	
	\begin{center}
		\verb| jolie user_db.ol |
	\end{center}

	\paragraph{Microservizio per il Service Level Agreement}
	Per avviare il microservizio relativo al Service Level Agreement è necesario recarsi nella cartella:
	\begin{center}
		\verb| \Backend\services\slaDB|
	\end{center}
	
	ed eseguire da terminale il comando:
	
	\begin{center}
		\verb| jolie sla_db.ol |
	\end{center}

	\paragraph{Microservizio per la gestione di file}
	Per avviare il microservizio relativo alla gestione di file è necesario recarsi nella cartella:
	\begin{center}
		\verb| \Backend\services\filehandlerDB|
	\end{center}
	
	ed eseguire da terminale il comando:
	
	\begin{center}
		\verb| jolie filehandler.ol |
	\end{center}

	\paragraph{Microservizio per la gestione di microservizi}
	Per avviare il microservizio relativo alla gestione di microservizi è necesario recarsi nella cartella:
	\begin{center}
		\verb| \Backend\services\microservicesDB|
	\end{center}
	
	ed eseguire da terminale il comando:
	
	\begin{center}
		\verb| jolie microservices_db.ol |
	\end{center}

	\paragraph{Microservizio per la gestione delle transazioni}
Per avviare il microservizio relativo alla gestione delle transazioni è necesario recarsi nella cartella:
\begin{center}
	\verb| \Backend\services\transactionsDB|
\end{center}

ed eseguire da terminale il comando:

\begin{center}
	\verb| jolie transactions_db.ol |
\end{center}

\subsubsection{Microservizi relativi all'API Gateway}
Di seguito saranno elencati i microservizi da avviare per una corretta funzione dell'API Gateway. L'ordine di avvio  è rilevante e come prerequisito si richiede di aver avviato tutti i servizi elencati al punto 5.4.1.

\paragraph{Microservizio per gestione microservizi del gateway}
	Per avviare il microservizio relativo alla gestione delle transazioni è necesario recarsi nella cartella:
	\begin{center}
		\verb| \Backend\services\microservicesDB|
	\end{center}
	
	ed eseguire da terminale il comando:
	
	\begin{center}
		\verb| jolie serviceinteractionhandler.ol |
	\end{center}


\paragraph{Avvio del gateway}
	Per avviare il microservizio relativo alla gestione delle transazioni è necesario recarsi nella cartella:
	\begin{center}
		\verb| \Backend\gateway|
	\end{center}
	
	ed eseguire da terminale il comando:
	
	\begin{center}
		\verb| jolie gateway.ol |
	\end{center}

\newpage
\subsection{Configurazione database}

Per la configurazione dei database, è necessario avere accessi amministrativi al database che si intende utilizzare. Tramite un tool grafico (ad esempio PhpMyAdmin) o riga di comando, è necessario creare 5 database corrispondenti a ciascun microservizio. \\ Successivamente, in ciascun database deve venir eseguita un importazione dei file .sql forniti in dotazione con il software. Tale procedimento crea le tabelle necessarie per la corretta funzionalità dei servizi.

Prima dell'avvio dell'applicazione, è necessario modificare i file interfaccia relativi ai servizi backend, affinchè essi puntino al database corrispondente. I file da modificare sono i seguenti:
\begin{center}
	\verb| filehandler.ol |
	\verb| microservices_db.ol |
	\verb| sla_db.ol |
	\verb| transactions_db.ol |
	\verb| user_db.ol |
\end{center}

Per la corretta impostazione, è necessario cercare le voci relative ai dati di connessione:

\begin{center}
	\verb| .host |
	\verb| .driver |
	\verb| .port |
	\verb| .database |
	\verb| .username |
	\verb| .password |
\end{center}

In particolare, le diciture sopraelencate corrispondono ai seguenti valori:

\begin{itemize}
	\item \textbf{.host}: L'URL del database, al quale il servizio effettuerà la connessione
	\item \textbf{.driver}: Il driver JDBC da utilizzare. In particolare, nel caso di installazione come da specifiche, dovrà essere utilizzato il driver \verb| mysql |.
	\item \textbf{.port}: La porta di connessione al database. Di default tale valore è 3306 per i database MySQL.
	\item \textbf{.database}: Il nome del database corrispondente al servizio considerato. Si presti particolare attenzione ad associare il servizio con l'opportuno database che ospita le tabelle corrispondenti.
	\item \textbf{.username}: L'username con diritti di lettura e scrittura sul database
	\item \textbf{.password}: La password per l'accesso al database.
\end{itemize}

\subsection{Avvio dell'applicazione}
Aprire il terminale nella cartella con il seguente percorso:
\begin{center}
	\verb|\Frontend| 
\end{center} 
ed eseguire il seguente comando:
\begin{center}
	\verb| npm start|
\end{center}

